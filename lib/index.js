// Generated by CoffeeScript 1.6.3
var app, formats, geomoment,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

geomoment = require('geomoment/lib/client');

module.exports = app = angular.module('geomoment', []);

formats = {
  dashes: 'YYYY-MM-DD',
  abbrv: 'ddd, MMM Do',
  long: 'dddd, MMMM Do',
  short: 'MMM D',
  weekday: 'dddd'
};

app.filter('date', function() {
  return function() {
    throw Error('Please use `formatDate` instead of `date`.');
  };
});

app.filter('formatDate', function() {
  return function(date, tzid, outFormat) {
    var outformat;
    if (date == null) {
      return '';
    }
    if (!tzid) {
      throw Error('tzid required');
    }
    if (__indexOf.call(Object.keys(formats), outformat) >= 0) {
      outformat = formats[outformat];
    }
    return geomoment(date).tz(tzid).format(outFormat);
  };
});

app.filter('formatDay', function() {
  return function(day, outFormat) {
    if (__indexOf.call(Object.keys(formats), outFormat) < 0) {
      throw Error("Unknown format identifier '" + outFormat + "'");
    }
    return geomoment.day(day, moment.pacific.tzid).format(formats[outFormat]);
  };
});

app.factory('geomoment', function() {
  return geomoment;
});

app;
